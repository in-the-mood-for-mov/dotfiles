{"id":"dotfiles-alt","title":"Add Eglot integration for pkl-lsp","description":"Register pkl-ts-mode in eglot-server-programs mapping to pkl-lsp. Configure workspace/configuration to pass Pkl.cli.path and Pkl.formatter.grammarVersion via eglot-workspace-configuration as defcustom variables. Handle pkl-lsp:// URI scheme for stdlib navigation. Flymake diagnostics come free with eglot. Optionally add format-on-save via eglot-format-buffer as opt-in defcustom.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-08T13:48:32.893811502-05:00","created_by":"sgenier","updated_at":"2026-02-08T13:48:32.893811502-05:00","dependencies":[{"issue_id":"dotfiles-alt","depends_on_id":"dotfiles-r93","type":"parent-child","created_at":"2026-02-08T13:48:49.663138307-05:00","created_by":"sgenier"},{"issue_id":"dotfiles-alt","depends_on_id":"dotfiles-nr9","type":"blocks","created_at":"2026-02-08T13:48:52.707337907-05:00","created_by":"sgenier"}]}
{"id":"dotfiles-i3h","title":"Implement tree-sitter font-lock rules","description":"Translate apple/tree-sitter-pkl highlights.scm into treesit-font-lock-rules. Organize into 4 feature levels: (1) comment, definition (2) keyword, string, type (3) property, constant, number, boolean (4) operator, bracket, delimiter. Reference node types from grammar.js and node-types.json. Use treesit-explore-mode to verify against sample Pkl files.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-08T13:48:24.175561284-05:00","created_by":"sgenier","updated_at":"2026-02-08T13:48:24.175561284-05:00","dependencies":[{"issue_id":"dotfiles-i3h","depends_on_id":"dotfiles-r93","type":"parent-child","created_at":"2026-02-08T13:48:49.568453353-05:00","created_by":"sgenier"},{"issue_id":"dotfiles-i3h","depends_on_id":"dotfiles-nr9","type":"blocks","created_at":"2026-02-08T13:48:52.611106534-05:00","created_by":"sgenier"}]}
{"id":"dotfiles-lqi","title":"Implement tree-sitter indentation rules","description":"Define treesit-simple-indent-rules for Pkl's block structure. Handle: objectBody, classBody, methodBody nesting; list/map literals; multiline string literals; when/for generators inside object bodies; amended objects; function arguments spanning multiple lines. Test against Pkl stdlib examples and edge cases.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-08T13:48:26.900394669-05:00","created_by":"sgenier","updated_at":"2026-02-08T13:48:26.900394669-05:00","dependencies":[{"issue_id":"dotfiles-lqi","depends_on_id":"dotfiles-r93","type":"parent-child","created_at":"2026-02-08T13:48:49.599013965-05:00","created_by":"sgenier"},{"issue_id":"dotfiles-lqi","depends_on_id":"dotfiles-nr9","type":"blocks","created_at":"2026-02-08T13:48:52.643320608-05:00","created_by":"sgenier"}]}
{"id":"dotfiles-nr9","title":"Set up project scaffolding and grammar installation helper","description":"Create pkl-ts-mode.el with basic project structure. Add entry to treesit-language-source-alist for apple/tree-sitter-pkl so users can install the grammar via M-x treesit-install-language-grammar. Define pkl-ts-mode derived from prog-mode with auto-mode-alist for .pkl and .pcf. Include treesit-ready-p check with graceful error message.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T13:48:20.73240439-05:00","created_by":"sgenier","updated_at":"2026-02-08T13:48:20.73240439-05:00","dependencies":[{"issue_id":"dotfiles-nr9","depends_on_id":"dotfiles-r93","type":"parent-child","created_at":"2026-02-08T13:48:49.536480343-05:00","created_by":"sgenier"}]}
{"id":"dotfiles-pge","title":"Write ERT tests and sample Pkl files","description":"Create test/ directory with pkl-ts-mode-tests.el. Write ERT tests covering: font-lock face assignments for keywords/strings/comments/types, indentation of nested blocks and edge cases, imenu index generation, auto-mode-alist activation. Include sample .pkl files exercising various language features.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T13:48:35.441985851-05:00","created_by":"sgenier","updated_at":"2026-02-08T13:48:35.441985851-05:00","dependencies":[{"issue_id":"dotfiles-pge","depends_on_id":"dotfiles-r93","type":"parent-child","created_at":"2026-02-08T13:48:49.694442533-05:00","created_by":"sgenier"},{"issue_id":"dotfiles-pge","depends_on_id":"dotfiles-i3h","type":"blocks","created_at":"2026-02-08T13:48:53.219234231-05:00","created_by":"sgenier"},{"issue_id":"dotfiles-pge","depends_on_id":"dotfiles-lqi","type":"blocks","created_at":"2026-02-08T13:48:53.250295942-05:00","created_by":"sgenier"}]}
{"id":"dotfiles-r93","title":"Implement pkl-ts-mode.el for Emacs","description":"Create a modern Emacs major mode for editing Pkl files using tree-sitter (apple/tree-sitter-pkl) and LSP (apple/pkl-lsp). Replaces the existing regexp-based pkl-mode with proper tree-sitter font-lock, indentation, imenu, navigation, and eglot integration.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-02-08T13:48:15.103768707-05:00","created_by":"sgenier","updated_at":"2026-02-08T13:48:15.103768707-05:00"}
{"id":"dotfiles-uom","title":"Add Imenu and defun navigation support","description":"Set treesit-simple-imenu-settings to index classes, typeAliases, and top-level properties. Set treesit-defun-type-regexp so C-M-a/C-M-e navigate between class/function/property definitions. Consider which-function-mode support.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T13:48:29.340287707-05:00","created_by":"sgenier","updated_at":"2026-02-08T13:48:29.340287707-05:00","dependencies":[{"issue_id":"dotfiles-uom","depends_on_id":"dotfiles-r93","type":"parent-child","created_at":"2026-02-08T13:48:49.630710279-05:00","created_by":"sgenier"},{"issue_id":"dotfiles-uom","depends_on_id":"dotfiles-nr9","type":"blocks","created_at":"2026-02-08T13:48:52.675788736-05:00","created_by":"sgenier"}]}
